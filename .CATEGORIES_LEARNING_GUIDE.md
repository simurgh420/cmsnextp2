# 📚 راهنمای کامل دسته‌بندی‌های پروژه CMS Next.js

## 🎯 مقدمه

این فایل شامل تمام دسته‌بندی‌ها و بخش‌های مختلف پروژه CMS شما است که برای یادگیری و درک بهتر ساختار پروژه تهیه شده است.

---

## 🏗️ ساختار کلی پروژه

### 1. 📁 ساختار فولدرها

```
src/
├── app/                    # صفحات Next.js App Router
│   ├── dashboard/         # داشبورد اصلی
│   ├── products/          # مدیریت محصولات
│   ├── categories/        # مدیریت دسته‌بندی‌ها
│   ├── orders/           # مدیریت سفارش‌ها
│   ├── customers/        # مدیریت مشتریان
│   ├── reports/          # گزارش‌ها
│   └── settings/         # تنظیمات
├── components/           # کامپوننت‌های قابل استفاده مجدد
│   ├── layout/          # کامپوننت‌های چیدمان
│   ├── products/        # کامپوننت‌های محصولات
│   └── ui/              # کامپوننت‌های UI پایه
├── application/         # منطق کسب‌وکار و انواع داده
└── lib/                # ابزارهای کمکی
```

---

## 🎨 دسته‌بندی‌های اصلی سیستم

### 1. 🏠 **داشبورد (Dashboard)**

- **مسیر:** `/dashboard`
- **آیکون:** MdDashboard
- **توضیحات:** صفحه اصلی سیستم مدیریت محتوا
- **وظایف:**
  - نمایش آمار کلی
  - دسترسی سریع به بخش‌های مختلف
  - نمای کلی از وضعیت سیستم

**فایل‌های مرتبط:**

- `src/app/dashboard/page.tsx` - صفحه اصلی داشبورد
- `src/app/dashboard/layout.tsx` - لایوت داشبورد

### 2. 📦 **محصولات (Products)**

- **مسیر:** `/products`
- **آیکون:** FaBox
- **توضیحات:** مدیریت کامل محصولات سیستم
- **وظایف:**
  - لیست محصولات
  - افزودن محصول جدید
  - ویرایش محصولات موجود
  - حذف محصولات

**فایل‌های مرتبط:**

- `src/app/products/page.tsx` - لیست محصولات
- `src/app/products/new/page.tsx` - افزودن محصول جدید
- `src/app/products/new/[id]/page.tsx` - ویرایش محصول
- `src/components/products/ProductForm.tsx` - فرم محصول
- `src/components/products/ProductsTable.tsx` - جدول محصولات
- `src/components/products/ProductRow.tsx` - ردیف محصول
- `src/application/products/products.types.ts` - انواع داده محصول
- `src/application/products/products.mock.ts` - داده‌های نمونه

**انواع محصولات موجود:**

- گوشی موبایل (12,000,000 تومان)
- لپ‌تاپ (35,000,000 تومان)
- هدفون (800,000 تومان)

**وضعیت‌های محصول:**

- فعال (active)
- غیرفعال (inactive)

### 3. 🏷️ **دسته‌بندی‌ها (Categories)**

- **مسیر:** `/categories`
- **آیکون:** MdCategory
- **توضیحات:** مدیریت دسته‌بندی‌های محصولات
- **وظایف:**
  - لیست دسته‌بندی‌ها
  - افزودن دسته‌بندی جدید
  - ویرایش دسته‌بندی‌های موجود
  - حذف دسته‌بندی‌ها

**فایل‌های مرتبط:**

- `src/app/categories/page.tsx` - لیست دسته‌بندی‌ها
- `src/app/categories/new/page.tsx` - افزودن دسته‌بندی جدید
- `src/app/categories/new/[id]/page.tsx` - ویرایش دسته‌بندی
- `src/app/categories/layout.tsx` - لایوت دسته‌بندی‌ها

**وضعیت فعلی:** در حال توسعه

### 4. 🛒 **سفارش‌ها (Orders)**

- **مسیر:** `/orders`
- **آیکون:** MdShoppingCart
- **توضیحات:** مدیریت سفارش‌های مشتریان
- **وظایف:**
  - لیست سفارش‌ها
  - جزئیات سفارش
  - تغییر وضعیت سفارش
  - مدیریت پرداخت‌ها

**فایل‌های مرتبط:**

- `src/app/orders/page.tsx` - لیست سفارش‌ها
- `src/app/orders/[id]/page.tsx` - جزئیات سفارش
- `src/app/orders/layout.tsx` - لایوت سفارش‌ها

### 5. 👥 **مشتریان (Customers)**

- **مسیر:** `/customers`
- **آیکون:** MdPeople
- **توضیحات:** مدیریت اطلاعات مشتریان
- **وظایف:**
  - لیست مشتریان
  - اطلاعات مشتری
  - تاریخچه سفارش‌ها
  - مدیریت حساب کاربری

**فایل‌های مرتبط:**

- `src/app/customers/page.tsx` - لیست مشتریان
- `src/app/customers/[id]/page.tsx` - اطلاعات مشتری
- `src/app/customers/layout.tsx` - لایوت مشتریان

### 6. 📊 **گزارش‌ها (Reports)**

- **مسیر:** `/reports`
- **آیکون:** MdBarChart
- **توضیحات:** گزارش‌گیری و آمار سیستم
- **وظایف:**
  - گزارش فروش
  - آمار محصولات
  - گزارش مشتریان
  - نمودارهای تحلیلی

**فایل‌های مرتبط:**

- `src/app/reports/page.tsx` - صفحه گزارش‌ها

### 7. ⚙️ **تنظیمات (Settings)**

- **مسیر:** `/settings`
- **آیکون:** MdSettings
- **توضیحات:** تنظیمات کلی سیستم
- **وظایف:**
  - تنظیمات عمومی
  - مدیریت کاربران
  - تنظیمات امنیتی
  - پیکربندی سیستم

**فایل‌های مرتبط:**

- `src/app/settings/page.tsx` - صفحه تنظیمات

---

## 🧩 کامپوننت‌های مشترک

### 1. 🎨 **کامپوننت‌های UI**

- **Button** - دکمه‌های مختلف
- **Input** - فیلدهای ورودی
- **Select** - لیست‌های انتخاب
- **Dialog** - پنجره‌های گفتگو
- **Avatar** - تصاویر پروفایل
- **Dropdown Menu** - منوهای کشویی

### 2. 🏗️ **کامپوننت‌های Layout**

- **Header** - هدر سیستم
- **Sidebar** - منوی کناری
- **SidebarItem** - آیتم‌های منو
- **SidebarToggle** - دکمه باز/بسته کردن منو

---

## 🔧 تکنولوژی‌های استفاده شده

### 1. **Frontend Framework**

- **Next.js 14** - فریمورک React با App Router
- **React 18** - کتابخانه رابط کاربری
- **TypeScript** - زبان برنامه‌نویسی

### 2. **Styling**

- **Tailwind CSS** - فریمورک CSS
- **CSS Modules** - استایل‌دهی محلی

### 3. **Form Management**

- **React Hook Form** - مدیریت فرم‌ها
- **Zod** - اعتبارسنجی داده‌ها
- **@hookform/resolvers/zod** - اتصال Zod به React Hook Form

### 4. **Icons**

- **React Icons** - آیکون‌های مختلف
- **Material Design Icons** - آیکون‌های Material Design

---

## 📋 انواع داده‌ها (Data Types)

### 1. **Product Type**

```typescript
export type Product = {
  id: string;
  name: string;
  price: number;
  status: 'active' | 'inactive';
};
```

### 2. **Sidebar Item Type**

```typescript
export type SidebarItemType = {
  label: string;
  href: string;
  icon: IconType;
};
```

---

## 🚀 نحوه استفاده از سیستم

### 1. **شروع پروژه**

```bash
npm run dev
```

### 2. **دسترسی به بخش‌های مختلف**

- از منوی کناری (Sidebar) استفاده کنید
- هر بخش دارای لایوت مخصوص خود است
- تمام صفحات از Header و Sidebar مشترک استفاده می‌کنند

### 3. **مدیریت محصولات**

- برای افزودن محصول جدید: `/products/new`
- برای ویرایش محصول: `/products/new/[id]`
- برای مشاهده لیست: `/products`

---

## 🔄 وضعیت توسعه

### ✅ **تکمیل شده:**

- ساختار کلی پروژه
- سیستم ناوبری (Sidebar)
- مدیریت محصولات
- کامپوننت‌های UI پایه
- لایوت‌های صفحات

### 🚧 **در حال توسعه:**

- مدیریت دسته‌بندی‌ها
- مدیریت سفارش‌ها
- مدیریت مشتریان
- سیستم گزارش‌گیری

### 📋 **برنامه آینده:**

- اتصال به API
- سیستم احراز هویت
- مدیریت فایل‌ها
- سیستم اعلان‌ها

---

## 💡 نکات مهم برای یادگیری

### 1. **ساختار Next.js App Router**

- هر پوشه در `app/` یک route است
- `page.tsx` فایل صفحه اصلی است
- `layout.tsx` لایوت مشترک است

### 2. **مدیریت State**

- از React Hook Form برای فرم‌ها استفاده شده
- Zod برای اعتبارسنجی داده‌ها

### 3. **استایل‌دهی**

- Tailwind CSS برای استایل‌دهی سریع
- کامپوننت‌های UI قابل استفاده مجدد

### 4. **TypeScript**

- تمام فایل‌ها با TypeScript نوشته شده
- انواع داده‌ها تعریف شده‌اند

---

## 🎯 خلاصه

این پروژه یک سیستم مدیریت محتوا (CMS) کامل است که با Next.js و TypeScript ساخته شده. سیستم شامل 7 بخش اصلی است که هر کدام وظایف خاص خود را دارند. ساختار پروژه به گونه‌ای طراحی شده که قابل توسعه و نگهداری باشد.

**بخش‌های کلیدی:**

1. داشبورد - نمای کلی سیستم
2. محصولات - مدیریت کالاها
3. دسته‌بندی‌ها - سازماندهی محصولات
4. سفارش‌ها - مدیریت فروش
5. مشتریان - مدیریت کاربران
6. گزارش‌ها - تحلیل داده‌ها
7. تنظیمات - پیکربندی سیستم

هر بخش دارای صفحات مجزا برای مشاهده، افزودن، ویرایش و حذف است که از کامپوننت‌های مشترک استفاده می‌کنند.

---

## 🔄 روند کارکرد کدها (Code Flow)

### 1. 🚀 **شروع برنامه (Application Startup)**

#### **مرحله 1: اجرای Next.js**

```bash
npm run dev
```

- Next.js سرور توسعه را روی پورت 3000 راه‌اندازی می‌کند
- فایل `next.config.ts` تنظیمات پروژه را بارگذاری می‌کند
- TypeScript کامپایل می‌شود

#### **مرحله 2: بارگذاری Layout اصلی**

```typescript
// src/app/layout.tsx
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="fa" dir="rtl">
      <body className={inter.className}>
        {children}
      </body>
    </html>
  )
}
```

### 2. 🧭 **سیستم ناوبری (Navigation System)**

#### **مرحله 1: بارگذاری Sidebar**

```typescript
// src/components/layout/Sidebar/Sidebar.tsx
export const Sidebar: FC = () => {
  return (
    <aside className="w-64 bg-white shadow-lg">
      <div className="p-4">
        <h2 className="text-xl font-bold">CMS Panel</h2>
      </div>
      <nav>
        {sidebarItems.map((item) => (
          <SidebarItem key={item.href} {...item} />
        ))}
      </nav>
    </aside>
  )
}
```

#### **مرحله 2: مدیریت Route ها**

- هر کلیک روی منو، URL تغییر می‌کند
- Next.js App Router مسیر را تشخیص می‌دهد
- صفحه مربوطه بارگذاری می‌شود

### 3. 📦 **روند کارکرد بخش محصولات**

#### **مرحله 1: لیست محصولات**

```typescript
// src/app/products/page.tsx
'use client'

export default function ProductsPage() {
  const [products, setProducts] = useState<Product[]>(mockProducts)

  return (
    <div>
      <h1>مدیریت محصولات</h1>
      <ProductsTable products={products} />
    </div>
  )
}
```

**روند کار:**

1. کامپوننت `ProductsPage` بارگذاری می‌شود
2. `useState` برای مدیریت state محصولات استفاده می‌شود
3. `mockProducts` از فایل mock بارگذاری می‌شود
4. `ProductsTable` کامپوننت رندر می‌شود

#### **مرحله 2: جدول محصولات**

```typescript
// src/components/products/ProductsTable.tsx
export const ProductsTable: FC<Props> = ({ products }) => {
  return (
    <div className="overflow-x-auto">
      <table className="min-w-full">
        <thead>
          <tr>
            <th>نام محصول</th>
            <th>قیمت</th>
            <th>وضعیت</th>
            <th>عملیات</th>
          </tr>
        </thead>
        <tbody>
          {products.map((product) => (
            <ProductRow key={product.id} product={product} />
          ))}
        </tbody>
      </table>
    </div>
  )
}
```

**روند کار:**

1. آرایه `products` به عنوان prop دریافت می‌شود
2. `map` روی آرایه اجرا می‌شود
3. برای هر محصول، `ProductRow` رندر می‌شود

#### **مرحله 3: ردیف محصول**

```typescript
// src/components/products/ProductRow.tsx
export const ProductRow: FC<Props> = ({ product }) => {
  const handleEdit = () => {
    router.push(`/products/new/${product.id}`)
  }

  const handleDelete = () => {
    // منطق حذف محصول
  }

  return (
    <tr>
      <td>{product.name}</td>
      <td>{product.price.toLocaleString()} تومان</td>
      <td>
        <span className={`px-2 py-1 rounded ${
          product.status === 'active'
            ? 'bg-green-100 text-green-800'
            : 'bg-red-100 text-red-800'
        }`}>
          {product.status === 'active' ? 'فعال' : 'غیرفعال'}
        </span>
      </td>
      <td>
        <Button onClick={handleEdit}>ویرایش</Button>
        <Button onClick={handleDelete} variant="destructive">حذف</Button>
      </td>
    </tr>
  )
}
```

### 4. 📝 **روند کارکرد فرم محصول**

#### **مرحله 1: بارگذاری فرم**

```typescript
// src/app/products/new/page.tsx
export default function NewProductPage() {
  const handleSubmit = (data: Omit<Product, 'id'>) => {
    console.log('محصول جدید:', data)
    // اینجا بعداً به API وصل می‌کنیم
  }

  return <ProductForm onSubmit={handleSubmit} />
}
```

#### **مرحله 2: مدیریت فرم**

```typescript
// src/components/products/ProductForm.tsx
export const ProductForm: FC<Props> = ({ initialData, onSubmit }) => {
  const form = useForm<FormData>({
    resolver: zodResolver(schema),
    defaultValues: initialData ?? {
      name: '',
      price: 0,
      status: 'active'
    },
  })

  return (
    <form onSubmit={form.handleSubmit(onSubmit)}>
      {/* فیلدهای فرم */}
    </form>
  )
}
```

**روند کار:**

1. `useForm` از React Hook Form فرم را مدیریت می‌کند
2. `zodResolver` اعتبارسنجی را انجام می‌دهد
3. `defaultValues` مقادیر پیش‌فرض را تنظیم می‌کند
4. `form.handleSubmit` هنگام ارسال فرم اجرا می‌شود

#### **مرحله 3: اعتبارسنجی**

```typescript
const schema = z.object({
  name: z.string().min(2, 'نام محصول الزامی است'),
  price: z.number().min(1000, 'قیمت باید بیشتر از 1000 باشد'),
  status: z.enum(['active', 'inactive']),
});
```

**روند کار:**

1. Zod schema تعریف می‌شود
2. هر فیلد قوانین اعتبارسنجی دارد
3. هنگام تایپ کردن، اعتبارسنجی انجام می‌شود
4. خطاها نمایش داده می‌شوند

### 5. 🎨 **روند کارکرد کامپوننت‌های UI**

#### **مرحله 1: کامپوننت Button**

```typescript
// src/components/ui/button.tsx
export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant = "default", size = "default", ...props }, ref) => {
    return (
      <button
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
```

**روند کار:**

1. `React.forwardRef` ref را به المنت DOM پاس می‌دهد
2. `cn` کلاس‌های CSS را ترکیب می‌کند
3. `buttonVariants` استایل‌های مختلف را تعریف می‌کند

#### **مرحله 2: کامپوننت Input**

```typescript
// src/components/ui/input.tsx
export const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
```

### 6. 🔄 **روند State Management**

#### **مرحله 1: Local State**

```typescript
const [products, setProducts] = useState<Product[]>(mockProducts);
const [isLoading, setIsLoading] = useState(false);
```

#### **مرحله 2: Form State**

```typescript
const form = useForm<FormData>({
  resolver: zodResolver(schema),
  defaultValues: { name: '', price: 0, status: 'active' },
});
```

#### **مرحله 3: Router State**

```typescript
const router = useRouter();
const params = useParams();
```

### 7. 🎯 **روند کلی اجرای برنامه**

#### **1. بارگذاری اولیه:**

```
1. Next.js شروع می‌شود
2. layout.tsx بارگذاری می‌شود
3. صفحه اصلی (/) رندر می‌شود
4. Sidebar و Header نمایش داده می‌شوند
```

#### **2. ناوبری:**

```
1. کاربر روی منو کلیک می‌کند
2. URL تغییر می‌کند
3. Next.js route را تشخیص می‌دهد
4. صفحه مربوطه بارگذاری می‌شود
5. کامپوننت‌ها رندر می‌شوند
```

#### **3. تعامل با فرم:**

```
1. کاربر در فیلد تایپ می‌کند
2. React Hook Form تغییرات را تشخیص می‌دهد
3. Zod اعتبارسنجی انجام می‌دهد
4. خطاها نمایش داده می‌شوند
5. هنگام ارسال، onSubmit اجرا می‌شود
```

#### **4. مدیریت داده:**

```
1. داده‌ها از mock files بارگذاری می‌شوند
2. useState برای مدیریت state استفاده می‌شود
3. تغییرات در UI منعکس می‌شوند
4. در آینده API calls اضافه خواهند شد
```

### 8. 🔧 **نکات مهم برای درک کدها**

#### **1. Client vs Server Components:**

- `'use client'` برای کامپوننت‌های تعاملی
- بدون `'use client'` برای کامپوننت‌های سرور

#### **2. Props و State:**

- Props برای انتقال داده بین کامپوننت‌ها
- State برای مدیریت داده‌های محلی

#### **3. Event Handling:**

- `onClick` برای کلیک
- `onSubmit` برای ارسال فرم
- `onChange` برای تغییرات

#### **4. Conditional Rendering:**

```typescript
{isLoading ? <Spinner /> : <Content />}
{error && <ErrorMessage />}
```

#### **5. List Rendering:**

```typescript
{items.map(item => <ItemComponent key={item.id} item={item} />)}
```

### 9. 🚀 **مراحل توسعه آینده**

#### **1. اتصال به API:**

```typescript
// به جای mock data
const fetchProducts = async () => {
  const response = await fetch('/api/products');
  const data = await response.json();
  setProducts(data);
};
```

#### **2. مدیریت خطا:**

```typescript
const [error, setError] = useState<string | null>(null);
```

#### **3. Loading States:**

```typescript
const [isLoading, setIsLoading] = useState(false);
```

این روند کارکرد کدها به شما کمک می‌کند تا کاملاً درک کنید که برنامه چگونه کار می‌کند و هر بخش چه نقشی دارد! 🎯
